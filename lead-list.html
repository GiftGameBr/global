<!DOCTYPE html>
<html data-theme="dark" lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Global - Leads</title>
    <link
      href="assets/images/favicon.png"
      rel="icon"
      sizes="16x16"
      type="image/png"
    />
    <link href="assets/css/remixicon.css" rel="stylesheet" />
    <link href="assets/css/lib/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/lib/apexcharts.css" rel="stylesheet" />
    <link href="assets/css/lib/dataTables.min.css" rel="stylesheet" />
    <link href="assets/css/lib/editor-katex.min.css" rel="stylesheet" />
    <link href="assets/css/lib/editor.atom-one-dark.min.css" rel="stylesheet" />
    <link href="assets/css/lib/editor.quill.snow.css" rel="stylesheet" />
    <link href="assets/css/lib/flatpickr.min.css" rel="stylesheet" />
    <link href="assets/css/lib/full-calendar.css" rel="stylesheet" />
    <link href="assets/css/lib/jquery-jvectormap-2.0.5.css" rel="stylesheet" />
    <link href="assets/css/lib/magnific-popup.css" rel="stylesheet" />
    <link href="assets/css/lib/slick.css" rel="stylesheet" />
    <link href="assets/css/lib/prism.css" rel="stylesheet" />
    <link href="assets/css/lib/file-upload.css" rel="stylesheet" />
    <link href="assets/css/lib/audioplayer.css" rel="stylesheet" />
    <link href="assets/css/style.css" rel="stylesheet" />
  </head>
  <body>
    <!-- ... [sidebar e navbar permanecem iguais] ... -->
    <aside class="sidebar">
      <button type="button" class="sidebar-close-btn">
        <iconify-icon icon="radix-icons:cross-2"></iconify-icon>
      </button>
      <div>
        <a href="index.html" class="sidebar-logo">
          <img
            src="assets/images/logo.png"
            alt="site logo"
            class="light-logo"
          />
          <img
            src="assets/images/logo-light.png"
            alt="site logo"
            class="dark-logo"
          />
          <img
            src="assets/images/logo-icon.png"
            alt="site logo"
            class="logo-icon"
          />
        </a>
      </div>
      <div class="sidebar-menu-area">
        <ul class="sidebar-menu" id="sidebar-menu">
          <li class="dropdown">
            <a href="javascript:void(0)">
              <iconify-icon
                icon="solar:home-smile-angle-outline"
                class="menu-icon"
              ></iconify-icon>
              <span>Dashboard</span>
            </a>
            <ul class="sidebar-submenu">
              <li>
                <a href="index.html"
                  ><i
                    class="ri-circle-fill circle-icon text-primary-600 w-auto"
                  ></i
                  >Home</a
                >
              </li>
              <li>
                <a href="relatorio-mes.html"
                  ><i
                    class="ri-circle-fill circle-icon text-warning-main w-auto"
                  ></i
                  >Relatório Mensal</a
                >
              </li>
              <li>
                <a href="relatorio-ano.html"
                  ><i
                    class="ri-circle-fill circle-icon text-warning-main w-auto"
                  ></i
                  >Relatório Anual</a
                >
              </li>
            </ul>
          </li>
          <li class="sidebar-menu-group-title">Clientes</li>
          <li>
            <a href="lead-list.html">
              <iconify-icon
                icon="ri:user-add-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Leads</span>
            </a>
          </li>
          <li>
            <a href="client-list.html">
              <iconify-icon
                icon="ri:group-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Clientes</span>
            </a>
          </li>
          <li class="sidebar-menu-group-title">Funcionarios</li>
          <li>
            <a href="gerente-list.html">
              <iconify-icon
                icon="ri:user-star-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Gerentes</span>
            </a>
          </li>
          <li>
            <a href="admin-list.html">
              <iconify-icon
                icon="ri:user-settings-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Admins</span>
            </a>
          </li>
          <li>
            <a href="agente-list.html">
              <iconify-icon
                icon="ri:user-search-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Agentes</span>
            </a>
          </li>
          <li class="sidebar-menu-group-title">Solicitações</li>
          <li>
            <a href="custeio-list.html">
              <iconify-icon
                icon="ri:bank-card-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Crédito Custeios</span>
            </a>
          </li>
          <li>
            <a href="custeio-list.html">
              <iconify-icon
                icon="ri:bar-chart-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Crédito Investimento</span>
            </a>
          </li>
          <li>
            <a href="custeio-list.html">
              <iconify-icon
                icon="ri:exchange-dollar-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Crédito Comercialização</span>
            </a>
          </li>
          <li>
            <a href="custeio-list.html">
              <iconify-icon
                icon="ri:home-gear-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Avaliação Imóveis</span>
            </a>
          </li>
          <li>
            <a href="custeio-list.html">
              <iconify-icon
                icon="ri:leaf-line"
                class="menu-icon"
              ></iconify-icon>
              <span>Licenciamento Ambiental</span>
            </a>
          </li>
          <li class="sidebar-menu-group-title">Ajustes</li>
          <li class="dropdown">
            <a href="javascript:void(0)">
              <i class="ri-user-settings-line text-xl me-14 d-flex w-auto"></i>
              <span>Regras</span>
            </a>
            <ul class="sidebar-submenu">
              <li>
                <a href="role-access.html"
                  ><i
                    class="ri-circle-fill circle-icon text-primary-600 w-auto"
                  ></i
                  >Role & Access</a
                >
              </li>
              <li>
                <a href="assign-role.html"
                  ><i
                    class="ri-circle-fill circle-icon text-warning-main w-auto"
                  ></i
                  >Assign Role</a
                >
              </li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="javascript:void(0)">
              <iconify-icon
                icon="icon-park-outline:setting-two"
                class="menu-icon"
              ></iconify-icon>
              <span>Configurações</span>
            </a>
            <ul class="sidebar-submenu">
              <li>
                <a href="company.html"
                  ><i
                    class="ri-circle-fill circle-icon text-primary-600 w-auto"
                  ></i
                  >Company</a
                >
              </li>
              <li>
                <a href="notification.html"
                  ><i
                    class="ri-circle-fill circle-icon text-warning-main w-auto"
                  ></i
                  >Notification</a
                >
              </li>
              <li>
                <a href="notification-alert.html"
                  ><i
                    class="ri-circle-fill circle-icon text-info-main w-auto"
                  ></i
                  >Notification Alert</a
                >
              </li>
              <li>
                <a href="theme.html"
                  ><i
                    class="ri-circle-fill circle-icon text-danger-main w-auto"
                  ></i
                  >Theme</a
                >
              </li>
              <li>
                <a href="currencies.html"
                  ><i
                    class="ri-circle-fill circle-icon text-danger-main w-auto"
                  ></i
                  >Currencies</a
                >
              </li>
              <li>
                <a href="language.html"
                  ><i
                    class="ri-circle-fill circle-icon text-danger-main w-auto"
                  ></i
                  >Languages</a
                >
              </li>
              <li>
                <a href="payment-gateway.html"
                  ><i
                    class="ri-circle-fill circle-icon text-danger-main w-auto"
                  ></i
                  >Payment Gateway</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </aside>

    <main class="dashboard-main">
      <div class="navbar-header">
        <div class="row align-items-center justify-content-between">
          <div class="col-auto">
            <div class="d-flex flex-wrap align-items-center gap-4">
              <button type="button" class="sidebar-toggle">
                <iconify-icon
                  icon="heroicons:bars-3-solid"
                  class="icon text-2xl non-active"
                ></iconify-icon>
                <iconify-icon
                  icon="iconoir:arrow-right"
                  class="icon text-2xl active"
                ></iconify-icon>
              </button>
              <button type="button" class="sidebar-mobile-toggle">
                <iconify-icon
                  icon="heroicons:bars-3-solid"
                  class="icon"
                ></iconify-icon>
              </button>
            </div>
          </div>
          <div class="col-auto">
            <div class="d-flex flex-wrap align-items-center gap-3">
              <!-- Notification dropdown end -->
              <p class="mb-0 me-2 text-sm text-white" id="welcome-message">
                Bem-vindo, <strong id="user-profile-name">...</strong>
              </p>
              <div class="dropdown">
                <button
                  class="d-flex justify-content-center align-items-center rounded-circle"
                  type="button"
                  data-bs-toggle="dropdown"
                >
                  <img
                    src="assets/images/user.png"
                    alt="image"
                    class="w-40-px h-40-px object-fit-cover rounded-circle"
                  />
                </button>
                <div
                  class="dropdown-menu to-top dropdown-menu-sm"
                  style="min-width: 150px; max-width: 220px; width: 180px"
                >
                  <ul class="to-top-list">
                    <li>
                      <a
                        class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-primary d-flex align-items-center gap-3"
                        href="view-profile.html"
                      >
                        <iconify-icon
                          icon="solar:user-linear"
                          class="icon text-xl"
                        ></iconify-icon>
                        My Profile</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-primary d-flex align-items-center gap-3"
                        href="email.html"
                      >
                        <iconify-icon
                          icon="tabler:message-check"
                          class="icon text-xl"
                        ></iconify-icon>
                        Inbox</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-primary d-flex align-items-center gap-3"
                        href="company.html"
                      >
                        <iconify-icon
                          icon="icon-park-outline:setting-two"
                          class="icon text-xl"
                        ></iconify-icon>
                        Setting</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-danger d-flex align-items-center gap-3"
                        href="javascript:void(0)"
                        id="logout-btn"
                      >
                        <iconify-icon
                          icon="lucide:power"
                          class="icon text-xl"
                        ></iconify-icon>
                        Log Out
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- Profile dropdown end -->
            </div>
          </div>
        </div>
      </div>
      <div class="dashboard-main-body">
        <div
          class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24"
        >
          <h6 class="fw-semibold mb-0">LEADS</h6>
          <ul class="d-flex align-items-center gap-2">
            <li class="fw-medium">
              <a
                class="d-flex align-items-center gap-1 hover-text-primary"
                href="index.html"
              >
                <iconify-icon
                  class="icon text-lg"
                  icon="solar:home-smile-angle-outline"
                ></iconify-icon>
                Dashboard
              </a>
            </li>
            <li>-</li>
            <li class="fw-medium">Leads</li>
          </ul>
        </div>
        <div class="card h-100 p-0 radius-12">
          <div
            class="card-header border-bottom bg-base py-16 px-24 d-flex align-items-center flex-wrap gap-3"
          >
            <!-- container flex único para filtros e botão -->
            <div class="d-flex align-items-center flex-wrap gap-3 w-100">
              <span class="text-md fw-medium text-secondary-light mb-0"
                >Show</span
              >
              <select
                id="items-per-page"
                class="form-select form-select-sm w-auto"
              >
                <option value="1">1</option>
                <option value="5">5</option>
                <option value="10" selected>10</option>
                <option value="20">20</option>
              </select>
              <div class="input-group w-auto">
                <span class="input-group-text bg-transparent border-end-0">
                  <iconify-icon icon="ion:search-outline"></iconify-icon>
                </span>
                <input
                  type="text"
                  id="search-input"
                  class="form-control border-start-0"
                  placeholder="Pesquisar..."
                />
              </div>
              <select id="filter-status" class="form-select w-auto">
                <option value="">Status</option>
                <option value="inactive">Pendente</option>
                <option value="active">Verificado</option>
              </select>
              <select id="filter-tipo-servico" class="form-select w-auto">
                <option value="">Serviço</option>
                <option value="Crédito de Custeios">Crédito de Custeios</option>
                <option value="Crédito Rural de Investimento">
                  Crédito Rural de Investimento
                </option>
                <option value="Crédito de Comercialização">
                  Crédito de Comercialização
                </option>
                <option value="Avaliação de imóveis rurais">
                  Avaliação de imóveis rurais
                </option>
                <option value="Licenciamento Ambiental">
                  Licenciamento Ambiental
                </option>
              </select>
              <select id="order-by" class="form-select w-auto">
                <option value="createdAt_desc">Mais Recentes</option>
                <option value="createdAt_asc">Mais Antigos</option>
                <option value="nome_asc">Nome (A-Z)</option>
                <option value="nome_desc">Nome (Z-A)</option>
                <option value="sobrenome_asc">Sobrenome (A-Z)</option>
                <option value="sobrenome_desc">Sobrenome (Z-A)</option>
                <option value="email_asc">Email (A-Z)</option>
                <option value="email_desc">Email (Z-A)</option>
                <option value="tipo_servico_asc">Serviço (A-Z)</option>
                <option value="tipo_servico_desc">Serviço (Z-A)</option>
                <option value="cidade_asc">Cidade (A-Z)</option>
                <option value="cidade_desc">Cidade (Z-A)</option>
                <option value="estado_asc">Estado (A-Z)</option>
                <option value="estado_desc">Estado (Z-A)</option>
              </select>
              <!-- Botão alinhado à direita -->
              <button
                class="btn btn-success ms-auto"
                data-bs-target="#addUserModal"
                data-bs-toggle="modal"
                style="min-width: 180px"
              >
                + Adicionar Lead
              </button>
            </div>
          </div>

          <div class="card-body p-24">
            <div class="table-responsive scroll-sm">
              <table class="table bordered-table sm-table mb-0">
                <thead>
                  <tr>
                    <th>Serviço Solicitado</th>
                    <th>Nome</th>
                    <th>Sobrenome</th>
                    <th>Telefone</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th>Ação</th>
                    <th>Criado por</th>
                    <th>Entrada</th>
                    <th>Emprego</th>

                    <th>Estado</th>
                    <th>Cidade</th>

                    <th>CEP</th>
                  </tr>
                </thead>
                <tbody id="leads-tbody"></tbody>
              </table>
            </div>
            <div
              class="d-flex align-items-center justify-content-between flex-wrap gap-2 mt-24"
            >
              <span id="pagination-info">Showing 1 to 10 of 12 entries</span>
              <ul
                class="pagination d-flex flex-wrap align-items-center gap-2 justify-content-center"
              ></ul>
            </div>
          </div>
        </div>
      </div>
      <footer class="d-footer">
        <div class="row align-items-center justify-content-between">
          <div class="col-auto">
            <p class="mb-0">© 2025 Global. All Rights Reserved.</p>
          </div>
          <div class="col-auto">
            <p class="mb-0">
              Made by <span class="text-primary-600">ComosTech</span>
            </p>
          </div>
        </div>
      </footer>
    </main>

    <!-- MODAL Add User -->
    <!-- MODAL Add Lead -->
    <!-- MODAL: Add Lead -->
    <div
      class="modal fade"
      id="addUserModal"
      tabindex="-1"
      aria-labelledby="addUserModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white rounded-4 shadow">
          <div class="modal-header border-0 pb-0">
            <h5 class="modal-title fw-bold">
              <iconify-icon
                icon="solar:user-plus-linear"
                class="me-2 text-primary"
              ></iconify-icon>
              Adicionar Lead
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="lead-form">
              <div class="row g-3">
                <!-- Nome -->
                <div class="col-sm-6">
                  <label for="nome" class="form-label"
                    >Nome <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="nome"
                    placeholder="Ex: João"
                    required
                  />
                </div>
                <!-- Sobrenome -->
                <div class="col-sm-6">
                  <label for="sobrenome" class="form-label"
                    >Sobrenome <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="sobrenome"
                    placeholder="Ex: Silva"
                    required
                  />
                </div>
                <!-- Telefone -->
                <div class="col-sm-6">
                  <label for="telefone" class="form-label"
                    >Telefone <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="telefone"
                    placeholder="(00) 00000-0000"
                    required
                  />
                </div>
                <!-- Email -->
                <div class="col-sm-6">
                  <label for="email" class="form-label"
                    >E-mail <span class="text-danger">*</span></label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    placeholder="email@email.com"
                    required
                  />
                </div>
                <!-- Emprego -->
                <div class="col-sm-6">
                  <label for="emprego" class="form-label">Emprego</label>
                  <input
                    type="text"
                    class="form-control"
                    id="emprego"
                    placeholder="Emprego (opcional)"
                  />
                </div>
                <!-- Tipo de Serviço -->
                <div class="col-sm-6">
                  <label for="tipo_servico" class="form-label"
                    >Serviço Solicitado
                    <span class="text-danger">*</span></label
                  >
                  <select class="form-select" id="tipo_servico" required>
                    <option value="">Selecione...</option>
                    <option value="Crédito de Custeios">
                      Crédito de Custeios
                    </option>
                    <option value="Crédito Rural de Investimento">
                      Crédito Rural de Investimento
                    </option>
                    <option value="Crédito de Comercialização">
                      Crédito de Comercialização
                    </option>
                    <option value="Avaliação de imóveis rurais">
                      Avaliação de imóveis rurais
                    </option>
                    <option value="Licenciamento Ambiental">
                      Licenciamento Ambiental
                    </option>
                  </select>
                </div>
                <!-- CEP -->
                <div class="col-sm-4">
                  <label for="cep" class="form-label">CEP</label>
                  <input
                    type="text"
                    class="form-control"
                    id="cep"
                    placeholder="CEP"
                  />
                </div>
                <!-- Estado -->
                <div class="col-sm-4">
                  <label for="estado" class="form-label">Estado</label>
                  <input
                    type="text"
                    class="form-control"
                    id="estado"
                    placeholder="Estado"
                  />
                </div>
                <!-- Cidade -->
                <div class="col-sm-4">
                  <label for="cidade" class="form-label">Cidade</label>
                  <input
                    type="text"
                    class="form-control"
                    id="cidade"
                    placeholder="Cidade"
                  />
                </div>
              </div>
              <hr class="my-4 bg-secondary" />
              <div class="d-flex justify-content-center mt-4">
                <button type="submit" class="btn btn-primary px-4">
                  Salvar Lead
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL: Editar Lead -->
    <div
      class="modal fade"
      id="editLeadModal"
      tabindex="-1"
      aria-labelledby="editLeadModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white rounded-4 shadow">
          <div class="modal-header border-0 pb-0">
            <h5 class="modal-title fw-bold">
              <iconify-icon
                icon="solar:user-edit-linear"
                class="me-2 text-warning"
              ></iconify-icon>
              Editar Lead
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="edit-lead-form">
              <input type="hidden" id="edit_id" />
              <div class="row g-3">
                <div class="col-sm-6">
                  <label for="edit_nome" class="form-label"
                    >Nome <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="edit_nome"
                    required
                  />
                </div>
                <div class="col-sm-6">
                  <label for="edit_sobrenome" class="form-label"
                    >Sobrenome <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="edit_sobrenome"
                    required
                  />
                </div>
                <div class="col-sm-6">
                  <label for="edit_telefone" class="form-label"
                    >Telefone <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="edit_telefone"
                    required
                  />
                </div>
                <div class="col-sm-6">
                  <label for="edit_email" class="form-label"
                    >E-mail <span class="text-danger">*</span></label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="edit_email"
                    required
                  />
                </div>
                <div class="col-sm-6">
                  <label for="edit_emprego" class="form-label">Emprego</label>
                  <input type="text" class="form-control" id="edit_emprego" />
                </div>
                <div class="col-sm-6">
                  <label for="edit_tipo_servico" class="form-label"
                    >Serviço Solicitado
                    <span class="text-danger">*</span></label
                  >
                  <select class="form-select" id="edit_tipo_servico" required>
                    <option value="">Selecione...</option>
                    <option value="Crédito de Custeios">
                      Crédito de Custeios
                    </option>
                    <option value="Crédito Rural de Investimento">
                      Crédito Rural de Investimento
                    </option>
                    <option value="Crédito de Comercialização">
                      Crédito de Comercialização
                    </option>
                    <option value="Avaliação de imóveis rurais">
                      Avaliação de imóveis rurais
                    </option>
                    <option value="Licenciamento Ambiental">
                      Licenciamento Ambiental
                    </option>
                  </select>
                </div>
                <div class="col-sm-4">
                  <label for="edit_cep" class="form-label">CEP</label>
                  <input type="text" class="form-control" id="edit_cep" />
                </div>
                <div class="col-sm-4">
                  <label for="edit_estado" class="form-label">Estado</label>
                  <input type="text" class="form-control" id="edit_estado" />
                </div>
                <div class="col-sm-4">
                  <label for="edit_cidade" class="form-label">Cidade</label>
                  <input type="text" class="form-control" id="edit_cidade" />
                </div>
              </div>
              <hr class="my-4 bg-secondary" />
              <div class="d-flex justify-content-center mt-4">
                <button type="submit" class="btn btn-primary px-4">
                  Salvar Alterações
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Search & Pagination Controls -->
    <input
      type="text"
      id="search-input"
      placeholder="Buscar..."
      class="form-control mb-3"
    />
    <ul class="pagination"></ul>

    <!-- SCRIPTS -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="assets/js/lib/bootstrap.bundle.min.js"></script>
    <script src="assets/js/lib/apexcharts.min.js"></script>
    <script src="assets/js/lib/dataTables.min.js"></script>
    <script src="assets/js/lib/iconify-icon.min.js"></script>
    <script src="assets/js/lib/jquery-ui.min.js"></script>
    <script src="assets/js/lib/jquery-jvectormap-2.0.5.min.js"></script>
    <script src="assets/js/lib/jquery-jvectormap-world-mill-en.js"></script>
    <script src="assets/js/lib/magnifc-popup.min.js"></script>
    <script src="assets/js/lib/slick.min.js"></script>
    <script src="assets/js/lib/prism.js"></script>
    <script src="assets/js/lib/file-upload.js"></script>
    <script src="assets/js/lib/audioplayer.js"></script>
    <script src="assets/js/app.js"></script>
    <!-- Firebase libs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script>
      // Firebase Configuração
      const firebaseConfig = {
        apiKey: "AIzaSyBxREWzRP-X8Q5b-BtiV6A1PFLbKSdfzwk",
        authDomain: "global-1a649.firebaseapp.com",
        projectId: "global-1a649",
        storageBucket: "global-1a649.firebasestorage.app",
        messagingSenderId: "689137289621",
        appId: "1:689137289621:web:7595220d59d48d48960e9c",
      };
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      const db = firebase.firestore();

      // ====== INÍCIO: PERFIL USUÁRIO E LOGOUT ======
      firebase.auth().onAuthStateChanged((user) => {
        if (!user) {
          window.location.href = "sign-in.html";
        } else {
          // Preenche nome
          const elName = document.getElementById("user-profile-name");
          if (elName) {
            elName.textContent =
              user.displayName || user.email || user.phoneNumber || "Usuário";
          }
          // Preenche tipo (você pode personalizar se tiver informação de tipo, aqui está vazio)
          const elType = document.getElementById("user-profile-type");
          if (elType) {
            elType.textContent = ""; // Ou "Admin", "User", etc.
          }
        }
      });

      const btnLogout = document.getElementById("logout-btn");
      if (btnLogout) {
        btnLogout.addEventListener("click", function () {
          firebase
            .auth()
            .signOut()
            .then(() => {
              window.location.href = "sign-in.html";
            });
        });
      }
      // ====== FIM: PERFIL USUÁRIO E LOGOUT ======

      // ... RESTANTE DO SEU SCRIPT (leads, renderização, filtros etc) IGUAL ...
      // Referências
      const tbody = document.getElementById("leads-tbody");
      const searchInput = document.getElementById("search-input");
      const pagination = document.querySelectorAll(".pagination")[0];
      const paginationInfo = document.getElementById("pagination-info");
      let allLeads = [];
      let currentPage = 1;
      const itemsPerPage = 10;

      // Checagem de autenticação já feita acima
      firebase.auth().onAuthStateChanged(async (user) => {
        if (!user) {
          window.location.href = "sign-in.html";
          return;
        }
        loadLeads();
      });

      async function loadLeads() {
        const snapshot = await db
          .collection("leads")
          .orderBy("createdAt", "desc")
          .get();
        allLeads = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));
        renderTable();
      }

      // Salvar Lead
      document
        .getElementById("lead-form")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const user = firebase.auth().currentUser;
          const addedBy =
            user?.displayName || user?.email || user?.phoneNumber || "Usuário";
          const data = {
            nome: document.getElementById("nome").value,
            sobrenome: document.getElementById("sobrenome").value,
            telefone: document.getElementById("telefone").value,
            email: document.getElementById("email").value,
            emprego: document.getElementById("emprego").value,
            tipo_servico: document.getElementById("tipo_servico").value,
            cep: document.getElementById("cep").value,
            estado: document.getElementById("estado").value,
            cidade: document.getElementById("cidade").value,
            status: "inactive",
            addedBy: addedBy,
            createdAt: new Date(),
          };
          try {
            await db.collection("leads").add(data);
            alert("Salvo com sucesso!");
            e.target.reset();
            bootstrap.Modal.getOrCreateInstance(
              document.getElementById("addUserModal")
            ).hide();
            loadLeads();
          } catch (err) {
            alert("Erro: " + err.message);
          }
        });

      // Renderização da tabela de leads
      function renderTable() {
        // Busca e filtros
        const searchTerm = document
          .getElementById("search-input")
          .value.toLowerCase();
        const filterStatus = document.getElementById("filter-status").value;
        const filterTipoServico = document.getElementById(
          "filter-tipo-servico"
        ).value;
        const orderBy = document.getElementById("order-by").value;
        const itemsPerPage = parseInt(
          document.getElementById("items-per-page")?.value || 10,
          10
        );

        let filtered = allLeads.filter((lead) => {
          // Pesquisa livre
          const matchesSearch =
            (lead.nome || "").toLowerCase().includes(searchTerm) ||
            (lead.sobrenome || "").toLowerCase().includes(searchTerm) ||
            (lead.email || "").toLowerCase().includes(searchTerm) ||
            (lead.telefone || "").toLowerCase().includes(searchTerm) ||
            (lead.tipo_servico || "").toLowerCase().includes(searchTerm) ||
            (lead.cidade || "").toLowerCase().includes(searchTerm) ||
            (lead.estado || "").toLowerCase().includes(searchTerm) ||
            (lead.cep || "").toLowerCase().includes(searchTerm);

          // Filtro status
          const matchesStatus = !filterStatus || lead.status === filterStatus;

          // Filtro tipo de serviço
          const matchesTipoServico =
            !filterTipoServico || lead.tipo_servico === filterTipoServico;

          return matchesSearch && matchesStatus && matchesTipoServico;
        });

        // Ordenação dinâmica
        const [field, direction] = orderBy.split("_");
        filtered.sort((a, b) => {
          let aValue = a[field];
          let bValue = b[field];
          // Campo data
          if (field === "createdAt") {
            aValue = aValue?.toDate ? aValue.toDate().getTime() : 0;
            bValue = bValue?.toDate ? bValue.toDate().getTime() : 0;
          } else {
            aValue = (aValue || "").toLowerCase();
            bValue = (bValue || "").toLowerCase();
          }
          if (aValue < bValue) return direction === "asc" ? -1 : 1;
          if (aValue > bValue) return direction === "asc" ? 1 : -1;
          return 0;
        });

        // Paginação
        const start = (currentPage - 1) * itemsPerPage;
        const pageData = filtered.slice(start, start + itemsPerPage);

        tbody.innerHTML =
          pageData
            .map(
              (l, i) => `
      <tr>
        
        <td>${l.tipo_servico || ""}</td>
        <td>${l.nome || ""}</td>
        <td>${l.sobrenome || ""}</td>
        <td>${l.telefone || ""}</td>
        <td>${l.email || ""}</td>
        <td>
          <button 
            class="badge border-0 px-3 py-2 ${
              l.status === "inactive" ? "bg-warning" : "bg-success"
            } text-white"
            style="min-width: 90px;"
            onclick="toggleStatus('${l.id}', '${
                l.status === "inactive" ? "active" : "inactive"
              }')"
            title="Clique para mudar status"
          >
            ${l.status === "inactive" ? "Pendente" : "Verificado"}
          </button>
        </td>
        <td class="text-center">
          <button class="btn btn-sm btn-warning me-1" onclick="openEditLead('${
            l.id
          }')">Editar</button>
          <button class="btn btn-sm btn-danger" onclick="deleteLead('${
            l.id
          }')">Deletar</button>
        </td>
        <td>${l.addedBy || ""}</td>
        <td>${
          l.createdAt?.toDate ? l.createdAt.toDate().toLocaleDateString() : ""
        }</td>
        <td>${l.emprego || ""}</td>
        <td>${l.estado || ""}</td>
        <td>${l.cidade || ""}</td>
        <td>${l.cep || ""}</td>
      </tr>
    `
            )
            .join("") ||
          `<tr><td colspan='14' class='text-center'>Nenhum resultado</td></tr>`;

        renderPagination(filtered.length, itemsPerPage);
        if (paginationInfo)
          paginationInfo.textContent = `Mostrando ${
            filtered.length === 0 ? 0 : start + 1
          } a ${Math.min(start + itemsPerPage, filtered.length)} de ${
            filtered.length
          } registros`;
      }

      // Paginação
      function renderPagination(total, itemsPerPage) {
        const pages = Math.ceil(total / itemsPerPage);
        pagination.innerHTML = "";
        for (let i = 1; i <= pages; i++) {
          const li = document.createElement("li");
          li.className = "page-item";
          li.innerHTML = `<a href="#" class="page-link ${
            i === currentPage ? "active" : ""
          }">${i}</a>`;
          li.onclick = (e) => {
            e.preventDefault();
            currentPage = i;
            renderTable();
          };
          pagination.appendChild(li);
        }
      }

      searchInput.addEventListener("input", () => {
        currentPage = 1;
        renderTable();
      });
      window.toggleStatus = async function (id, newStatus) {
        try {
          await db.collection("leads").doc(id).update({ status: newStatus });
          loadLeads();
        } catch (err) {
          alert("Erro ao atualizar status: " + err.message);
        }
      };

      // Editar lead
      window.openEditLead = function (id) {
        const lead = allLeads.find((l) => l.id === id);
        if (!lead) return;
        document.getElementById("edit_id").value = lead.id;
        document.getElementById("edit_nome").value = lead.nome || "";
        document.getElementById("edit_sobrenome").value = lead.sobrenome || "";
        document.getElementById("edit_telefone").value = lead.telefone || "";
        document.getElementById("edit_email").value = lead.email || "";
        document.getElementById("edit_emprego").value = lead.emprego || "";
        document.getElementById("edit_tipo_servico").value =
          lead.tipo_servico || "";
        document.getElementById("edit_cep").value = lead.cep || "";
        document.getElementById("edit_estado").value = lead.estado || "";
        document.getElementById("edit_cidade").value = lead.cidade || "";

        bootstrap.Modal.getOrCreateInstance(
          document.getElementById("editLeadModal")
        ).show();
      };

      // Salvar alterações do lead editado
      document
        .getElementById("edit-lead-form")
        .addEventListener("submit", async function (e) {
          e.preventDefault();
          const id = document.getElementById("edit_id").value;
          const data = {
            nome: document.getElementById("edit_nome").value,
            sobrenome: document.getElementById("edit_sobrenome").value,
            telefone: document.getElementById("edit_telefone").value,
            email: document.getElementById("edit_email").value,
            emprego: document.getElementById("edit_emprego").value,
            tipo_servico: document.getElementById("edit_tipo_servico").value,
            cep: document.getElementById("edit_cep").value,
            estado: document.getElementById("edit_estado").value,
            cidade: document.getElementById("edit_cidade").value,
          };
          try {
            await db.collection("leads").doc(id).update(data);
            alert("Lead atualizado com sucesso!");
            bootstrap.Modal.getOrCreateInstance(
              document.getElementById("editLeadModal")
            ).hide();
            loadLeads();
          } catch (err) {
            alert("Erro ao atualizar: " + err.message);
          }
        });

      // Deletar lead
      window.deleteLead = async function (id) {
        if (!confirm("Tem certeza que deseja deletar este lead?")) return;
        try {
          await db.collection("leads").doc(id).delete();
          loadLeads();
        } catch (err) {
          alert("Erro ao deletar: " + err.message);
        }
      };

      // Para testar sem login Firebase, remova o bloco de autenticação e chame diretamente loadLeads() ao carregar a página
      // loadLeads();
      document.getElementById("search-input").addEventListener("input", () => {
        currentPage = 1;
        renderTable();
      });
      document
        .getElementById("filter-status")
        .addEventListener("change", () => {
          currentPage = 1;
          renderTable();
        });
      document
        .getElementById("filter-tipo-servico")
        .addEventListener("change", () => {
          currentPage = 1;
          renderTable();
        });
      document.getElementById("order-by").addEventListener("change", () => {
        currentPage = 1;
        renderTable();
      });
      document
        .getElementById("items-per-page")
        .addEventListener("change", () => {
          currentPage = 1;
          renderTable();
        });
    </script>
    <script>
      document.documentElement.setAttribute("data-theme", "dark");
    </script>
  </body>
</html>
